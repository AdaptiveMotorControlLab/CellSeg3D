<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Inference module guide &mdash; napari-cellseg-3d  documentation</title><link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  <script id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/doctools.js"></script>
        <script src="../../_static/language_data.js"></script>
        <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Training module guide" href="training_module_guide.html" />
    <link rel="prev" title="Reviewer module guide" href="review_module_guide.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../../index.html"><img src="../../_static/logo_alpha.png" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption"><span class="caption-text">Main modules guides:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../welcome.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="review_module_guide.html">Reviewer module guide</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Inference module guide</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#interface-and-functionalities">Interface and functionalities</a></li>
<li class="toctree-l2"><a class="reference internal" href="#source-code">Source code</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="training_module_guide.html">Training module guide</a></li>
</ul>
<p class="caption"><span class="caption-text">Utilities &amp; advanced guides:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="metrics_module_guide.html">Metrics utility guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="convert_module_guide.html">Label conversion utility</a></li>
<li class="toctree-l1"><a class="reference internal" href="cropping_module_guide.html">Cropping module guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="custom_model_template.html">Advanced : Declaring a custom model</a></li>
</ul>
<p class="caption"><span class="caption-text">Source files:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../code/interface.html">interface.py</a></li>
<li class="toctree-l1"><a class="reference internal" href="../code/plugin_base.html">plugin_base.py</a></li>
<li class="toctree-l1"><a class="reference internal" href="../code/plugin_review.html">plugin_review.py</a></li>
<li class="toctree-l1"><a class="reference internal" href="../code/plugin_dock.html">plugin_dock.py</a></li>
<li class="toctree-l1"><a class="reference internal" href="../code/plugin_crop.html">plugin_crop.py</a></li>
<li class="toctree-l1"><a class="reference internal" href="../code/launch_review.html">launch_review.py</a></li>
<li class="toctree-l1"><a class="reference internal" href="../code/model_framework.html">model_framework.py</a></li>
<li class="toctree-l1"><a class="reference internal" href="../code/model_workers.html">model_workers.py</a></li>
<li class="toctree-l1"><a class="reference internal" href="../code/model_instance_seg.html">model_instance_seg.py</a></li>
<li class="toctree-l1"><a class="reference internal" href="../code/plugin_model_inference.html">plugin_model_inference.py</a></li>
<li class="toctree-l1"><a class="reference internal" href="../code/plugin_model_training.html">plugin_model_training.py</a></li>
<li class="toctree-l1"><a class="reference internal" href="../code/utils.html">utils.py</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">napari-cellseg-3d</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home"></a> &raquo;</li>
      <li>Inference module guide</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../_sources/res/guides/inference_module_guide.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <div class="section" id="inference-module-guide">
<span id="id1"></span><h1>Inference module guide<a class="headerlink" href="#inference-module-guide" title="Permalink to this headline">¶</a></h1>
<p>This module allows you to use  pre-trained segmentation algorithms (written in Pytorch) on volumes
to automatically label cells.</p>
<p>Currently, the following pre-trained models are available :</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Model</p></th>
<th class="head"><p>Link to original paper</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>VNet</p></td>
<td><p><a class="reference external" href="https://arxiv.org/pdf/1606.04797.pdf">Fully Convolutional Neural Networks for Volumetric Medical Image Segmentation</a></p></td>
</tr>
<tr class="row-odd"><td><p>SegResNet</p></td>
<td><p><a class="reference external" href="https://arxiv.org/pdf/1810.11654.pdf">3D MRI brain tumor segmentation using autoencoder regularization</a></p></td>
</tr>
<tr class="row-even"><td><p>TRAILMAP</p></td>
<td><p>An emulation in Pytorch of the <a class="reference external" href="https://github.com/AlbertPun/TRAILMAP">TRAILMAP project on GitHub</a></p></td>
</tr>
</tbody>
</table>
<div class="section" id="interface-and-functionalities">
<h2>Interface and functionalities<a class="headerlink" href="#interface-and-functionalities" title="Permalink to this headline">¶</a></h2>
<img alt="../../_images/inference_plugin_layout.png" class="align-right" src="../../_images/inference_plugin_layout.png" />
<ul class="simple">
<li><p>Loading data : When launching the module, you will be asked to provide an image folder containing all the volumes you’d like to be labeled.
All images with the chosen (<strong>.tif</strong> or <strong>.tiff</strong> currently supported) extension in this folder will be labeled.
You can then choose an output folder, where all the results will be saved.</p></li>
<li><p>Model choice : You can then choose one of the selected models above, which will be used for inference.</p></li>
<li><p>Anisotropy :If you want to see your results without anisotropy when you have anisotropic images, you can specify that you have anisotropic data
and set the resolution of your image in micron, this wil save &amp; show the results without anisotropy.</p></li>
<li><p>Thresholding : You can perform thresholding to binarize your labels, all values beneath the confidence threshold will be set to 0 using this.
If you wish to use instance segmentation it is recommended to use threshlding.</p></li>
<li><p>Viewing results : You can also select whether you’d like to see the results in napari afterwards; by default the first image processed will be displayed,
but you can choose to display up to ten at once. You can also request to see the originals.</p></li>
</ul>
<p>When you are done choosing your parameters, you can press the <strong>Start</strong> button to begin the inference process.
Once it has finished, results will be saved then displayed in napari; each output will be paired with its original.
On the left side, a progress bar and a log will keep you informed on the process.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<div class="line-block">
<div class="line">The files will be saved using the following format :</div>
<div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">{original_name}_{model}_{date</span> <span class="pre">&amp;</span> <span class="pre">time}_pred{id}.file_ext</span></code></div>
</div>
<div class="line">For example, using a VNet on the third image of a folder, called “somatomotor.tif” will yield the following name :</div>
<div class="line-block">
<div class="line"><em>somatomotor_VNet_2022_04_06_15_49_42_pred3.tif</em></div>
</div>
</div>
</div>
<div class="admonition hint">
<p class="admonition-title">Hint</p>
<div class="line-block">
<div class="line"><strong>Results</strong> will be displayed using the <strong>twilight shifted</strong> colormap if raw or <strong>turbo</strong> if thresholding has been applied, whereas the <strong>original</strong> image will be shown in the <strong>inferno</strong> colormap.</div>
<div class="line">Feel free to change the <strong>colormap</strong> or <strong>contrast</strong> when viewing results to ensure you can properly see the labels.</div>
<div class="line">You’ll most likely want to use <strong>3D view</strong> and <strong>grid mode</strong> in napari when checking results more broadly.</div>
</div>
</div>
<img alt="../../_images/inference_results_example.png" src="../../_images/inference_results_example.png" />
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>You can save the log after the worker is finished to easily remember which parameters you ran inference with.</p>
</div>
</div>
<div class="section" id="source-code">
<h2>Source code<a class="headerlink" href="#source-code" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p><a class="reference internal" href="../code/plugin_model_inference.html"><span class="doc">plugin_model_inference.py</span></a></p></li>
<li><p><a class="reference internal" href="../code/model_framework.html"><span class="doc">model_framework.py</span></a></p></li>
</ul>
</div>
</div>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="review_module_guide.html" class="btn btn-neutral float-left" title="Reviewer module guide" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="training_module_guide.html" class="btn btn-neutral float-right" title="Training module guide" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2022, Cyril Achard, Maxime Vidal.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>